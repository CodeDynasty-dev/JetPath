<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JetPath - Blazing Fast Backend Framework</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet"> 
 <link rel="stylesheet" href="/bundle.css">
<link rel="stylesheet" href="/custom-typography.css">
  <style> 
 
    :root {
      --primary: #6EE7B7;
      --primary-dark: #10B981;
      --secondary: #3B82F6;
      --secondary-dark: #2563EB;
      --dark: #0A0A0A;
      --dark-light: #121212;
      --dark-lighter: #1A1A1A;
      --text: #F9FAFB;
      --text-light: #D1D5DB;
      --text-lighter: #9CA3AF;
      --border: rgba(255, 255, 255, 0.1);
      --border-light: rgba(255, 255, 255, 0.05);
    }
 
    body {
      background-color: var(--dark);
      color: var(--text);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      line-height: 1.6;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      padding: 1rem 0;
      transition: all 0.3s ease;
    }

    .header-scrolled {
      background: rgba(10, 10, 10, 0.95);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1.5rem;
    }

    .logo-text {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-link {
      font-weight: 500;
      transition: color 0.2s ease;
      position: relative;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.3s ease;
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .nav-link:hover {
      color: var(--primary);
    }

    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--dark);
      border: none;
      box-shadow: 0 4px 14px rgba(59, 130, 246, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .btn-outline {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-outline:hover {
      border-color: var(--primary);
      color: var(--primary);
    }

    .mobile-menu-btn {
      display: none;
      padding: 0.5rem;
      border: none;
      background: transparent;
      cursor: pointer;
      z-index: 100;
    }

    .mobile-menu-btn svg {
      width: 24px;
      height: 24px;
    }

    .mobile-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 85;
    }

    @media (max-width: 1024px) {
      .mobile-menu-btn {
        display: block;
      }

      #doc-side-bar {
        position: fixed;
        top: 0;
        left: -256px;
        width: 256px;
        min-height: 100vh;
        height: 100%;
        background: rgba(10, 10, 10, 0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-right: 1px solid var(--border);
        z-index: 90;
        padding: 2rem 1rem;
        transition: left 0.3s ease;
      }

      #doc-side-bar.active {
        left: 0;
        display: block;
      }

      .mobile-overlay.active {
        display: block;
      }

      .main-content {
        margin-left: 0;
        padding: 4rem 1.5rem 1.5rem;
      }
    }

    /* Code Demo */
    .code-demo {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      transform: translateY(0);
      transition: transform 0.3s ease;
    }

    .code-demo:hover {
      transform: translateY(-5px);
    }

    .code-header {
      display: flex;
      align-items: center;
      background: #1E1E1E;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .code-dots {
      display: flex;
      gap: 0.375rem;
      margin-right: 1rem;
    }

    .code-dot {
      width: 0.75rem;
      height: 0.75rem;
      border-radius: 50%;
    }

    .code-dot.red {
      background-color: #FF5F56;
    }

    .code-dot.yellow {
      background-color: #FFBD2E;
    }

    .code-dot.green {
      background-color: #27C93F;
    }

    .code-tabs {
      display: flex;
      gap: 1rem;
    }

    .code-tab {
      font-size: 0.875rem;
      color: var(--text-lighter);
      cursor: pointer;
      padding-bottom: 0.25rem;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
    }

    .code-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .code-content {
      background: #1E1E1E;
      position: relative;
    }

    .code-wrapper {
      display: none;
    }

    .code-wrapper.active {
      display: block;
    }

    .copy-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: var(--text-lighter);
      padding: 0.375rem 0.75rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      z-index: 2;
    }

    .copy-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      color: var(--text);
    }

    pre {
      margin: 0 !important;
      padding: 1.5rem !important;
      overflow-x: auto;
      font-size: 0.9rem;
      line-height: 1.6;
      border-radius: 0;
    }

    code {
      font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
    }

    /* Features Section */
    .section {
      padding: 6rem 0;
    }

    .section-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
      text-align: center;
    }

    .section-title span {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }

    .section-subtitle {
      font-size: 1.125rem;
      color: var(--text-light);
      text-align: center;
      max-width: 700px;
      margin: 0 auto 3rem;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .feature-card {
      background: var(--dark-lighter);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      transition: all 0.3s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border-color: rgba(110, 231, 183, 0.3);
    }

    .feature-icon {
      width: 3rem;
      height: 3rem;
      background: linear-gradient(135deg, rgba(110, 231, 183, 0.2), rgba(59, 130, 246, 0.2));
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .feature-icon svg {
      width: 1.5rem;
      height: 1.5rem;
      color: var(--primary);
    }

    .feature-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .feature-description {
      color: var(--text-light);
      font-size: 1rem;
      line-height: 1.6;
      flex-grow: 1;
    }

    /* Why JetPath Section */
    .why-jetpath {
      background: linear-gradient(to bottom, var(--dark), var(--dark-light));
    }

    .comparison-table {
      width: 100%;
      background: var(--dark-lighter);
      border-radius: 1rem;
      overflow: hidden;
      border: 1px solid var(--border);
      margin-top: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .comparison-table thead {
      background: rgba(110, 231, 183, 0.1);
    }

    .comparison-table th,
    .comparison-table td {
      padding: 1rem 1.5rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .comparison-table th {
      font-weight: 600;
      color: var(--text);
    }

    .comparison-table td {
      color: var(--text-light);
    }

    .comparison-table tr:last-child td {
      border-bottom: none;
    }

    .highlight-cell {
      color: var(--primary) !important;
      font-weight: 600;
    }

    /* Performance Section */
    .performance {
      background: var(--dark);
      position: relative;
      overflow: hidden;
    }

    .performance::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 10% 90%, rgba(110, 231, 183, 0.08) 0%, transparent 50%);
      z-index: -1;
    }

    .benchmark-container {
      background: var(--dark-lighter);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      margin-top: 3rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .benchmark-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .benchmark-card {
      text-align: center;
    }

    .benchmark-value {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
      margin-bottom: 0.5rem;
    }

    .benchmark-label {
      color: var(--text-light);
      font-size: 0.875rem;
    }

    /* Ecosystem Section */
    .ecosystem {
      background: linear-gradient(to bottom, var(--dark-light), var(--dark));
    }

    .ecosystem-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .ecosystem-card {
      background: var(--dark-lighter);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      transition: all 0.3s ease;
      text-align: center;
    }

    .ecosystem-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border-color: rgba(59, 130, 246, 0.3);
    }

    .ecosystem-icon {
      width: 3.5rem;
      height: 3.5rem;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(110, 231, 183, 0.2));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ecosystem-icon svg {
      width: 1.75rem;
      height: 1.75rem;
      color: var(--secondary);
    }

    .ecosystem-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .ecosystem-description {
      color: var(--text-light);
      font-size: 1rem;
    }

    /* CTA Section */
    .cta {
      background: linear-gradient(to bottom right, var(--dark-light), #0B1120);
      padding: 6rem 0;
      position: relative;
      overflow: hidden;
    }

    .cta::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 20% 80%, rgba(110, 231, 183, 0.15) 0%, transparent 50%);
      z-index: -1;
    }

    .cta-content {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }

    .cta-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1.5rem;
    }

    .cta-description {
      color: var(--text-light);
      font-size: 1.125rem;
      margin-bottom: 2.5rem;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
    }

    /* Footer */
    .footer {
      background: var(--dark);
      padding: 4rem 0 2rem;
      border-top: 1px solid var(--border);
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 3rem;
      margin-bottom: 3rem;
    }

    .footer-brand {
      grid-column: 1 / -1;
    }

    @media (min-width: 768px) {
      .footer-brand {
        grid-column: auto;
      }
    }

    .footer-logo {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }

    .footer-tagline {
      color: var(--text-light);
      font-size: 0.875rem;
      margin-bottom: 1.5rem;
    }

    .footer-social {
      display: flex;
      gap: 1rem;
    }

    .footer-social-link {
      width: 2rem;
      height: 2rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      transition: all 0.2s ease;
    }

    .footer-social-link:hover {
      background: rgba(110, 231, 183, 0.1);
      color: var(--primary);
      transform: translateY(-3px);
    }

    .footer-heading {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1.25rem;
    }

    .footer-links {
      list-style: none;
    }

    .footer-link {
      margin-bottom: 0.75rem;
    }

    .footer-link a {
      color: var(--text-light);
      font-size: 0.9rem;
      transition: color 0.2s ease;
    }

    .footer-link a:hover {
      color: var(--primary);
    }

    .footer-bottom {
      border-top: 1px solid var(--border);
      padding-top: 2rem;
      text-align: center;
      color: var(--text-lighter);
      font-size: 0.875rem;
    }

    /* Animations */
    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-15px);
      }
    }

    .float-animation {
      animation: float 6s ease-in-out infinite;
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        padding: 1.5rem;
        background: rgba(10, 10, 10, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backpack-filter: blur(10px);
        border-bottom: 1px solid var(--border);
      }

      .nav.active {
        display: flex;
      }

      .mobile-menu-btn {
        display: block;
      }

      .hero-title {
        font-size: 2.5rem;
      }

      .hero-cta {
        flex-direction: column;
      }

      .code-demo {
        border-radius: 0.5rem;
      }

      .section-title {
        font-size: 2rem;
      }

      .cta-title {
        font-size: 2rem;
      }

      .cta-buttons {
        flex-direction: column;
      }
    }

    /* Additional enhancements inspired by Elysia.js */
    .custom-shape {
      position: absolute;
      width: 500px;
      height: 500px;
      filter: blur(100px);
      opacity: 0.15;
      z-index: -1;
    }

    .shape-1 {
      background: var(--primary);
      top: 10%;
      right: -200px;
      border-radius: 100% 0 0 100%;
    }

    .shape-2 {
      background: var(--secondary);
      bottom: -200px;
      left: -100px;
      border-radius: 100%;
    }

    /* Interactive feature buttons */
    .interactive-features {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .feature-btn {
      background: var(--dark-lighter);
      border: 1px solid var(--border);
      color: var(--text-light);
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .feature-btn:hover,
    .feature-btn.active {
      background: linear-gradient(135deg, rgba(110, 231, 183, 0.1), rgba(59, 130, 246, 0.1));
      border-color: rgba(110, 231, 183, 0.3);
      color: var(--primary);
      transform: translateY(-3px);
    }

    /* Terminal Animation */
    .terminal {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 3rem auto 0;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    }

    .terminal-header {
      display: flex;
      align-items: center;
      background: #1E1E1E;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .terminal-title {
      margin-left: 1rem;
      font-size: 0.875rem;
      color: var(--text-lighter);
    }

    .terminal-body {
      background: #0D1017;
      padding: 1.5rem;
      font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
      font-size: 0.875rem;
      color: var(--text-light);
      line-height: 1.7;
    }

    .terminal-line {
      display: flex;
      margin-bottom: 0.5rem;
    }

    .terminal-prompt {
      color: var(--primary);
      margin-right: 0.75rem;
      user-select: none;
    }

    .terminal-output {
      opacity: 0;
      animation: fadeIn 0.5s ease forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .terminal-cursor {
      display: inline-block;
      width: 0.5rem;
      height: 1.2rem;
      background: var(--primary);
      margin-left: 2px;
      animation: blink 1s infinite;
    }

    @keyframes blink {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0;
      }
    }

    .terminal-typing {
      position: relative;
    }

    .terminal-typing::after {
      content: '|';
      position: absolute;
      right: -10px;
      animation: blink 1s infinite;
    }

    /* Cursor highlight effect */
    .cursor-highlight {
      position: fixed;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle, rgba(110, 231, 183, 0.1) 0%, rgba(110, 231, 183, 0) 70%);
      transform: translate(-50%, -50%);
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }

    /* Section specific styles */
    .section-padding {
      padding-top: 5rem;
      /* Increased padding */
      padding-bottom: 5rem;
      /* Increased padding */
      padding-left: 1.5rem;
      /* px-6 */
      padding-right: 1.5rem;
      /* px-6 */
    }

    @media (min-width: 768px) {

      /* md: */
      .section-padding {
        padding-left: 3rem;
        /* md:px-12 */
        padding-right: 3rem;
        /* md:px-12 */
      }
    }

    @media (min-width: 1024px) {

      /* lg: */
      .section-padding {
        padding-left: 6rem;
        /* lg:px-24 */
        padding-right: 6rem;
        /* lg:px-24 */
      }
    }

    .section-title {
      font-size: 2.25rem;
      /* text-4xl */
      font-weight: 800;
      /* font-extrabold */
      text-align: center;
      margin-bottom: 3rem;
      /* mb-12 */
    }

    @media (min-width: 768px) {

      /* md: */
      .section-title {
        font-size: 2.75rem;
        /* md:text-5xl */
        margin-bottom: 4rem;
        /* md:mb-16 */
      }
    }
 

    .red {
      border: 1px red solid;
    }


        .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .search-bar-container {
      flex-grow: 1;
      max-width: 400px;
    }

    .search-bar {
      position: relative;
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      padding: 0.5rem 1rem;
      transition: all 0.3s ease;
      width: 100%;
      max-width: 100%;
    }

    .search-bar:focus-within {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(110, 231, 183, 0.2);
    }

    .search-input {
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 1rem;
      width: 100%;
      outline: none;
    }

    .search-bar svg {
      margin-right: 0.5rem;
    }

    /* Media Queries */
   
    /* Media Queries */
    @media (max-width: 768px) {
      .header-container {
        /* flex-wrap: wrap; */
        display: grid;
        grid-template-rows: 1fr 1fr;
      }
      .shape-1, .shape-2 {
        display: none;
      }
      .header-container.container {
        width: 100%;
        padding: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      .search-bar-container {
        flex-basis: 100%;
        max-width: 100%;
        margin-bottom: 0.5rem;
      }
      .header-container .flex.w-full.justify-between {
        min-width: 80vw;
        margin: 0 auto;
      }

      .search-bar {
        max-width: 100%;
      }
    }

    :not(pre)>code[class*=language-], pre[class*=language-] {
      background-color: unset !important;
    }

    #doc-side-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 256px;
      height: 100vh;
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-right: 1px solid var(--border);
      z-index: 90;
      padding: 4rem 1rem 1rem;
    }

    .main-content {
      margin-left: 256px;
      padding: 4rem 1.5rem 1.5rem;
    }

    @media (max-width: 1024px) {
      #doc-side-bar {
        display: none;
      }
      .main-content {
        margin-left: 0;
        padding: 4rem 1.5rem 1.5rem;
      }
    }
  </style>

  <link href="/prism.css" rel="stylesheet" />

</head>

<body>
  <!-- Cursor highlight effect -->
  <div class="cursor-highlight"></div>

  <!-- Decorative shapes -->
  <div class="custom-shape shape-1"></div>
  <div class="custom-shape shape-2"></div>
 
 <!-- Header -->
  <header class="header w-full">
    <div class="container header-container w-full">
      <div class="flex w-full justify-between">

        <div class="logo-container">
          <a href="/" title="JetPath" class="logo">
            <div class="flex gap-1">
              <img src="/icon-transparent.webp" class="h-[88px]" alt="">
          </div>
        </a>
        <a href="/" class="logo">
          <span class="logo-text">JetPath</span>
        </a>
      </div>
        <button class="mobile-menu-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
        </button>
      </div>

      <!-- Search Bar -->
      <div class="search-bar-container">
        <div class="search-bar">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" class="search-input" placeholder="Search...">
        </div>
      </div>

      <nav class="nav lg:ml-6">  
        <a href="/docs/introduction.html" class="nav-link">Docs</a>
        <a href="/docs/performance" class="nav-link">Performance</a>
        <a href="/docs/ecosystem" class="nav-link">Ecosystem</a>
        <a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank" class="btn btn-outline">GitHub</a>
        <!-- <a href="/docs/introduction.html" class="btn btn-primary">Get Started</a> -->
      </nav>
    </div>
  </header>
 
  <div class="mobile-overlay"></div>

  <!-- Sidebar -->
  <aside id="doc-side-bar" class="w-full lg:w-64 lg:flex-shrink-0 mb-8 lg:mb-0 bg-gray-900 text-gray-200 hidden lg:block mt-14 max-md:mt-[8rem]">
    <nav class="sticky top-[calc(4rem+1px+2rem)] h-full">
      <!-- Search -->
      <div class="px-4 py-6">
        <div class="relative">  
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
            </svg> 
          </div>
          <input type="text" name="doc-search" id="doc-search" class="block w-full pl-10 pr-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 sm:text-sm" placeholder="Search documentation">
        </div>
      </div>

      <!-- Navigation Links -->
      <div class="space-y-2">
        <!-- Getting Started Section -->
        <div class="px-4">
          <div class="flex items-center justify-between text-gray-400 cursor-pointer hover:text-white" data-section="getting-started">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
              </svg>
              <span class="text-sm font-medium">Getting Started</span>
            </div>
            <svg class="w-4 h-4 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <div class="space-y-1 pl-6 mt-2" id="getting-started-content">
            <a href="/docs/introduction.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Introduction</a>
            <a href="/docs/installation.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Installation</a>
            <a href="/docs/quickstart.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Quick Start</a>
          </div>
        </div>

        <!-- Core Concepts Section -->
        <div class="px-4">
          <div class="flex items-center justify-between text-gray-400 cursor-pointer hover:text-white" data-section="core-concepts">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
              <span class="text-sm font-medium">Core Concepts</span>
            </div>
            <svg class="w-4 h-4 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <div class="space-y-1 pl-6 mt-2" id="core-concepts-content">
            <a href="/docs/routing.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Routing</a>
            <a href="/docs/middleware.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Middleware</a>
            <a href="/docs/context.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Context (ctx)</a>
            <a href="/docs/error-handling.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Error Handling</a>
          </div>
        </div>

        <!-- Advanced Section -->
        <div class="px-4">
          <div class="flex items-center justify-between text-gray-400 cursor-pointer hover:text-white" data-section="advanced">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              <span class="text-sm font-medium">Advanced</span>
            </div>
            <svg class="w-4 h-4 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <div class="space-y-1 pl-6 mt-2" id="advanced-content">
            <a href="/docs/plugins.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Plugins</a>
            <a href="/docs/dependency-injection.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Dependency Injection</a>
            <a href="/docs/testing.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Testing</a>
            <a href="/docs/deployment.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Deployment</a>
          </div>
        </div>

        <!-- API Reference Section -->
        <div class="px-4">
          <div class="flex items-center justify-between text-gray-400 cursor-pointer hover:text-white" data-section="api-reference">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
              <span class="text-sm font-medium">API Reference</span>
            </div>
            <svg class="w-4 h-4 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <div class="space-y-1 pl-6 mt-2" id="api-reference-content">
            <a href="/docs/api-reference/types.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Types</a>
              <a href="/docs/api-reference/context.html" class="block px-3 py-2 rounded-md text-sm text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200">Context</a>
          </div>
        </div>
      </div>
    </nav>
  </aside>

  <main class="main-content">
    <script>
      // Initialize sections
      document.querySelectorAll('[data-section]').forEach(section => {
        const contentId = section.dataset.section + '-content';
        const content = document.getElementById(contentId);
        const arrow = section.querySelector('svg');
        
        // Add click handler
        section.addEventListener('click', () => {
          content.classList.toggle('hidden');
          arrow.classList.toggle('rotate-90');
        });
      });

      // Add active state to current page
      const currentPath = window.location.pathname;
      document.querySelectorAll('#doc-side-bar a').forEach(link => {
        if (link.getAttribute('href') === currentPath) {
          link.classList.add('bg-gray-700', 'text-white', 'font-medium');
        }
      });

      // Add smooth scroll behavior
      document.querySelectorAll('#doc-side-bar a').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const href = link.getAttribute('href');
          if (href.startsWith('#')) {
            const target = document.querySelector(href);
            if (target) {
              const headerHeight = document.querySelector('.header').offsetHeight;
              const elementPosition = target.getBoundingClientRect().top;
              const offsetPosition = elementPosition + window.pageYOffset - headerHeight;

              window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
              });

              // Close mobile menu if open
              nav.classList.remove('active');
            }
          } else {
            window.location.href = href;
          }
        });
      });
    </script>
    <section class="max-w-4xl mx-auto my-8 mt-[15rem]" >
      <h1>Core Concepts: Middleware</h1>
<p>Middleware functions are a fundamental part of building applications with JetPath. They allow you to execute code <strong>before</strong> your route handler runs and <strong>after</strong> it completes, enabling you to implement cross-cutting concerns like logging, authentication, data validation, error handling, and response formatting in a clean, reusable way.</p>
<hr>
<h2>What is Middleware?</h2>
<p>Think of middleware as functions that sit in the middle of the request-response cycle. They can:</p>
<ul>
<li>Execute any code.</li>
<li>Make changes to the request and response objects (<code>ctx</code>).</li>
<li>End the request-response cycle (e.g., by sending a response early for authentication failures).</li>
<li>Call the next middleware or route handler in the stack.</li>
<li>Execute code after the route handler has finished (e.g., for logging or final response modification).</li>
</ul>
<hr>
<h2>Defining Middleware</h2>
<p>In JetPath, middleware is typically defined by exporting a special function named <code>MIDDLEWARE_</code> from a <code>.jet.ts</code> file.</p>
<ul>
<li><strong>Structure:</strong> A JetPath middleware function takes the <code>ctx</code> (Context) object as its argument and <strong>must return another function</strong>. This inner function represents the post-handler logic and receives <code>ctx</code> and an optional <code>err</code> object.</li>
</ul>
<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">JetMiddleware</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">JetContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;jetpath&quot;</span>;
<p><span class="hljs-comment">// Define expected types for plugins if used in middleware</span>
<span class="hljs-comment">// Example: Assuming AuthPlugin and LoggerPlugin types exist</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AppPlugins</span> = [<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AuthPluginInstance</span>, <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">LoggerPluginInstance</span>];
<span class="hljs-comment">// Define expected type for application state attached to ctx.app</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AppState</span> = { <span class="hljs-attr">user</span>?: { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">role</span>: <span class="hljs-built_in">string</span> } };</p>
<p><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">MIDDLEWARE_</span>: <span class="hljs-title class_">JetMiddleware</span>&lt;<span class="hljs-title class_">AppState</span>, <span class="hljs-title class_">AppPlugins</span>&gt; = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">ctx</span>: <span class="hljs-title class_">JetContext</span>&lt;<span class="hljs-title class_">AppState</span>, <span class="hljs-title class_">AppPlugins</span>&gt;</span>) =&gt;</span> {
<span class="hljs-comment">// ========================</span>
<span class="hljs-comment">// === PRE-HANDLER CODE ===</span>
<span class="hljs-comment">// ========================</span>
<span class="hljs-comment">// This code runs BEFORE the route handler executes.</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string"><code>--&amp;gt; Request Start: &lt;span class=&quot;hljs-subst&quot;&gt;${ctx.request.method}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${ctx.request.url}&lt;/span&gt;</code></span>);
<span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
ctx.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Request-ID&quot;</span>, crypto.<span class="hljs-title function_">randomUUID</span>()); <span class="hljs-comment">// Example: Add request ID header</span></p>
<p><span class="hljs-comment">// Example: Authentication Check (can call plugins)</span>
<span class="hljs-comment">// const isPublic = ctx.request.url.startsWith('/public');</span>
<span class="hljs-comment">// if (!isPublic) {</span>
<span class="hljs-comment">//   const authResult = ctx.plugins.verifyAuth(ctx); // Assuming verifyAuth plugin exists</span>
<span class="hljs-comment">//   if (!authResult.authenticated) {</span>
<span class="hljs-comment">//     ctx.code = 401;</span>
<span class="hljs-comment">//     ctx.throw(&quot;Authentication Required&quot;); // Throwing ends cycle here, goes to post-handler error part</span>
<span class="hljs-comment">//   }</span>
<span class="hljs-comment">//   ctx.app.user = authResult.user; // Attach user to context app state</span>
<span class="hljs-comment">// }</span></p>
<p><span class="hljs-comment">// === RETURN POST-HANDLER FUNCTION ===</span>
<span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">ctx</span>: <span class="hljs-title class_">JetContext</span>&lt;<span class="hljs-title class_">AppState</span>, <span class="hljs-title class_">AppPlugins</span>&gt;, <span class="hljs-attr">err</span>?: <span class="hljs-title class_">Error</span></span>) =&gt;</span> {
<span class="hljs-comment">// =========================</span>
<span class="hljs-comment">// === POST-HANDLER CODE ===</span>
<span class="hljs-comment">// =========================</span>
<span class="hljs-comment">// This code runs AFTER the route handler finishes OR if an error occurs.</span></p>
<pre><code>&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; duration = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;() - startTime;
ctx.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;X-Response-Time&amp;quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${duration}&lt;/span&gt;ms`&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Example: Add response time header&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// --- Error Handling ---&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (err) {
  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`!!! Request Error: &lt;span class=&quot;hljs-subst&quot;&gt;${err.message}&lt;/span&gt;`&lt;/span&gt;, err.&lt;span class=&quot;hljs-property&quot;&gt;stack&lt;/span&gt;);
  &lt;span class=&quot;hljs-comment&quot;&gt;// Set status code if not already set by ctx.throw or validation&lt;/span&gt;
  ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt; = ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt; &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;400&lt;/span&gt; ? ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;;

  &lt;span class=&quot;hljs-comment&quot;&gt;// Log the error (e.g., using a logger plugin)&lt;/span&gt;
  &lt;span class=&quot;hljs-comment&quot;&gt;// ctx.plugins.logger?.error({ error: err.message, stack: err.stack, code: ctx.code });&lt;/span&gt;

  &lt;span class=&quot;hljs-comment&quot;&gt;// Send a standardized error response&lt;/span&gt;
  ctx.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;({
    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: {
      &lt;span class=&quot;hljs-attr&quot;&gt;message&lt;/span&gt;: ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt; ? err.&lt;span class=&quot;hljs-property&quot;&gt;message&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;Internal Server Error&amp;quot;&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;requestId&lt;/span&gt;: ctx.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;X-Request-ID&amp;quot;&lt;/span&gt;),
      &lt;span class=&quot;hljs-attr&quot;&gt;code&lt;/span&gt;: ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt;,
    },
  });
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Stop further processing after sending error response&lt;/span&gt;
}

&lt;span class=&quot;hljs-comment&quot;&gt;// --- 404 Handling ---&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// Check if a response was already sent by the handler&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// (Note: Exact check might depend on underlying response object state)&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; responseSent = ctx.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;status&lt;/span&gt; !== &lt;span class=&quot;hljs-number&quot;&gt;404&lt;/span&gt; || ctx.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt; != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!responseSent) {
  ctx.&lt;span class=&quot;hljs-property&quot;&gt;code&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;404&lt;/span&gt;;
  ctx.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;({
    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: {
      &lt;span class=&quot;hljs-attr&quot;&gt;message&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;Not Found&amp;quot;&lt;/span&gt;,
      &lt;span class=&quot;hljs-attr&quot;&gt;requestId&lt;/span&gt;: ctx.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;X-Request-ID&amp;quot;&lt;/span&gt;),
      &lt;span class=&quot;hljs-attr&quot;&gt;code&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;404&lt;/span&gt;,
    }
  });
  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Stop further processing&lt;/span&gt;
}

&lt;span class=&quot;hljs-comment&quot;&gt;// --- Successful Response Logging ---&lt;/span&gt;
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&amp;lt;-- Request End: &lt;span class=&quot;hljs-subst&quot;&gt;${ctx.request.method}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${ctx.request.url}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${ctx.code}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${duration}&lt;/span&gt;ms`&lt;/span&gt;);
&lt;span class=&quot;hljs-comment&quot;&gt;// Log success (e.g., using a logger plugin)&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// ctx.plugins.logger?.info({ status: ctx.code, duration });&lt;/span&gt;
</code></pre>
<p>};
};
</code></pre></p>
<p><em>[Based on middleware structure in <code>tests/app.jet.ts</code>]</em></p>
<h3>Key Points about the Structure:</h3>
<ul>
<li><strong>Pre-Handler Logic:</strong> Code written directly inside the exported <code>MIDDLEWARE_</code> function runs <em>before</em> the specific route handler is invoked.</li>
<li><strong>Post-Handler Logic:</strong> Code written inside the <em>returned function</em> runs <em>after</em> the route handler completes (either successfully or by throwing an error).</li>
<li><strong><code>err</code> Parameter:</strong> The <code>err</code> parameter in the returned function will contain an <code>Error</code> object if the route handler (or preceding middleware/validation) threw an error. Otherwise, it will be <code>undefined</code>.</li>
<li><strong>Ending the Cycle:</strong> You can send a response (<code>ctx.send()</code>) or throw an error (<code>ctx.throw()</code>) in the pre-handler logic to prevent the route handler from running. You <em>must</em> handle sending a response in the post-handler logic if an error occurred or if the route handler didn’t send one itself (e.g., for 404s).</li>
</ul>
<hr>
<h2>Execution Flow &amp; Order</h2>
<ol>
<li>JetPath matches the incoming request to a route handler.</li>
<li>The <strong>pre-handler</strong> section of the most relevant <code>MIDDLEWARE_</code> function executes. <em>(See Scoping below)</em>.</li>
<li><strong>(If not ended early)</strong> The route handler function executes.</li>
<li>The <strong>post-handler</strong> section (the returned function) of the <code>MIDDLEWARE_</code> function executes, receiving the context and any error that occurred.</li>
</ol>
<p>If multiple middleware functions apply (e.g., global and folder-level - see Scoping), the pre-handler sections execute from general to specific, and the post-handler sections execute in the reverse order (specific to general).</p>
<hr>
<h2>Scoping Middleware</h2>
<p><em>(Note: The provided example <code>tests/app.jet.ts</code> only explicitly shows a global middleware defined in the main app file. The following describes common patterns for scoping in file-based frameworks, which JetPath might implement or could adopt.)</em></p>
<p>Middleware can potentially be scoped to apply globally or only to specific parts of your API:</p>
<ul>
<li><strong>Global Middleware:</strong> Defining <code>MIDDLEWARE_</code> in your main application entry file (<code>app.jet.ts</code> in the example) or the root <code>src/index.jet.ts</code> likely applies it to <em>all</em> incoming requests.</li>
<li><strong>Directory/Layout Middleware (Potential Pattern):</strong> Frameworks often allow defining middleware in special files within subdirectories (e.g., <code>src/admin/_middleware.jet.ts</code> or <code>src/admin/_layout.jet.ts</code>). Such middleware would apply only to routes defined within that directory and its subdirectories, executing after global middleware but before the specific route handler. This allows applying specific logic (like admin authentication checks) only where needed. <em>[Confirmation needed from JetPath specifics if this pattern is supported].</em></li>
</ul>
<hr>
<h2>Common Use Cases</h2>
<p>Middleware is ideal for handling:</p>
<ul>
<li><strong>Logging:</strong> Recording request start/end times, methods, URLs, status codes.</li>
<li><strong>Authentication:</strong> Verifying tokens or session cookies before granting access to protected routes.</li>
<li><strong>Authorization:</strong> Checking user roles or permissions after authentication.</li>
<li><strong>Data Validation/Sanitization:</strong> Performing preliminary checks or sanitizing input (though route-specific schema validation is often preferred for core validation).</li>
<li><strong>Response Formatting:</strong> Adding common headers (like <code>X-Request-ID</code>, <code>X-Response-Time</code>, CORS headers) or standardizing the JSON response structure.</li>
<li><strong>Error Handling:</strong> Catching all errors from handlers/validation and sending standardized error responses.</li>
<li><strong>Rate Limiting:</strong> Implementing request limits based on IP or user.</li>
</ul>
<hr>
<h2>Error Handling in Middleware</h2>
<p>The post-handler function (<code>return (ctx, err) =&gt; { ... }</code>) is the primary place to centralize error handling.</p>
<ul>
<li>Check if the <code>err</code> argument exists.</li>
<li>If <code>err</code> exists:
<ul>
<li>Log the error details (message, stack).</li>
<li>Set an appropriate HTTP status code (<code>ctx.code</code>), often using a code already set (e.g., by <code>ctx.throw</code>) or defaulting to 500 for unexpected errors.</li>
<li>Send a user-friendly, standardized error response body.</li>
<li><strong>Crucially, <code>return</code></strong> after sending the error response to prevent further processing (like trying to send a 404 response).</li>
</ul>
</li>
</ul>
<hr>
<h2>Best Practices</h2>
<ul>
<li><strong>Keep Middleware Focused:</strong> Each middleware function should ideally handle a single, specific concern (e.g., one for logging, one for auth).</li>
<li><strong>Order Matters:</strong> Be mindful of the execution order, especially if one middleware depends on data prepared by another (e.g., auth middleware should run before authorization middleware).</li>
<li><strong>Handle Errors:</strong> Ensure your middleware correctly handles errors passed via the <code>err</code> parameter in the post-handler function.</li>
<li><strong>Performance:</strong> Middleware runs on every applicable request. Avoid slow, synchronous operations or heavy computations, especially in global middleware. Offload intensive tasks if necessary.</li>
<li><strong>Use <code>ctx.throw()</code>:</strong> Use <code>ctx.throw(message, statusCode)</code> in your pre-handler logic or route handlers to signal specific HTTP errors clearly, which can then be handled uniformly by your error-handling middleware.</li>
</ul>
<hr>
<h2>Next Steps</h2>
<ul>
<li>See how the <a href="https://www.google.com/search?q=./context.md"><strong>Context (<code>ctx</code>) Object</strong></a> is used within middleware and handlers.</li>
<li>Understand the complete <a href="https://www.google.com/search?q=./request-lifecycle.md"><strong>Request Lifecycle</strong></a>.</li>
<li>Review <a href="https://www.google.com/search?q=./error-handling.md"><strong>Error Handling</strong></a> strategies.</li>
</ul>
    </section>
 
 
  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <div class="footer-logo">JetPath</div>
          <p class="footer-tagline">the granular, fast and minimalist framework for Node, Deno and Bun. Embrace new standards!</p>
          <div class="footer-social">
            <a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank" class="footer-social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
                </path>
              </svg>
            </a>
            <a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank" class="footer-social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
                </path>
              </svg>
            </a>
            <a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank" class="footer-social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
              </svg>
            </a>
            <a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank" class="footer-social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                <rect x="2" y="9" width="4" height="12"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
            </a>
          </div>
        </div>

        <div class="footer-links-group">
          <h4 class="footer-heading">Documentation</h4>
          <ul class="footer-links">
            <li class="footer-link"><a href="/docs/introduction.html">Getting Started</a></li>
            <li class="footer-link"><a href="/docs/installation.html">API Reference</a></li>
            <li class="footer-link"><a href="/docs/installation.html">Installation</a></li>
            <li class="footer-link"><a href="/docs/home-links/toturial.html">Tutorials</a></li>
          </ul>
        </div>

        <div class="footer-links-group">
          <h4 class="footer-heading">Community</h4>
          <ul class="footer-links">
            <li class="footer-link"><a href="https://github.com/CodeDynasty-dev/JetPath" target="_blank">GitHub</a></li>
            <li class="footer-link"><a href="https://discord.com/invite/CodeDynasty" target="_blank">Discord</a></li>
            <li class="footer-link"><a href="https://twitter.com/CodeDynastyDev" target="_blank">Twitter</a></li>
            <li class="footer-link"><a href="https://blog.coddynasty.com" target="_blank">Blog</a></li>
          </ul>
        </div>

        <div class="footer-links-group">
          <h4 class="footer-heading">More</h4>
          <ul class="footer-links"> 
            <li class="footer-link"><a href="/docs/roadmap.html">Roadmap</a></li>
            <li class="footer-link"><a href="/docs/contribute.html">Contribute</a></li>
            <li class="footer-link"><a href="/docs/sponsors.html">Sponsors</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 JetPath. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Header scroll effect
    const header = document.querySelector('.header');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        header.classList.add('header-scrolled');
      } else {
        header.classList.remove('header-scrolled');
      }
    });
 

    // Code tabs
    const codeTabs = document.querySelectorAll('.code-tab');
    codeTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs
        codeTabs.forEach(t => t.classList.remove('active'));

        // Add active class to clicked tab
        tab.classList.add('active');

        // Hide all code wrappers
        document.querySelectorAll('.code-wrapper').forEach(wrapper => {
          wrapper.classList.remove('active');
        });

        // Show the corresponding code wrapper
        const tabId = tab.getAttribute('data-tab');
        document.getElementById(`${tabId}-code`).classList.add('active');
      });
    });

    // Copy button functionality
    const copyButtons = document.querySelectorAll('.copy-btn');
    copyButtons.forEach(button => {
      button.addEventListener('click', () => {
        const codeId = button.getAttribute('data-code');
        const codeElement = document.querySelector(`#${codeId}-code pre code`);

        navigator.clipboard.writeText(codeElement.textContent).then(() => {
          button.textContent = 'Copied!';
          setTimeout(() => {
            button.textContent = 'Copy';
          }, 2000);
        });
      });
    });

    // Feature buttons
    const featureButtons = document.querySelectorAll('.feature-btn');
    featureButtons.forEach(button => {
      button.addEventListener('click', () => {
        featureButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');

        // Here you could add logic to show different content based on selected feature
      });
    });

    // Cursor highlight effect
    const cursorHighlight = document.querySelector('.cursor-highlight');

    document.addEventListener('mousemove', (e) => {
      const x = e.clientX;
      const y = e.clientY;

      cursorHighlight.style.opacity = '1';
      cursorHighlight.style.left = `${x}px`;
      cursorHighlight.style.top = `${y}px`;

      const links = document.querySelectorAll('a, button');
      let hovering = false;

      links.forEach(link => {
        if (link.matches(':hover')) {
          hovering = true;
        }
      });

      if (hovering) {
        cursorHighlight.style.opacity = '0.3';
      } else {
        cursorHighlight.style.opacity = '0.1';
      }
    }); 
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();

        if (this.getAttribute('href') === '#') return;

        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          const headerHeight = document.querySelector('.header').offsetHeight;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerHeight;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });

          // Close mobile menu if open
          nav.classList.remove('active');
        }
      });
    });


     const sidebarLinks = document.querySelectorAll('.doc-link');
    const contentSections = document.querySelectorAll('article [id]'); // Select elements with IDs within the article

    function highlightSidebarLink() {
        let currentSectionId = '';
        const headerHeight = document.querySelector('.header').offsetHeight;
        const scrollPosition = window.pageYOffset + headerHeight + 50; // Add offset

        contentSections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (scrollPosition >= sectionTop) {
                currentSectionId = section.id;
            }
        });

        sidebarLinks.forEach(link => {
            link.classList.remove('text-[--primary]', 'font-semibold'); // Use Tailwind classes or custom classes
            link.classList.add('text-[--text-light]');
            if (link.getAttribute('href') === `#${currentSectionId}`) {
                link.classList.add('text-[--primary]', 'font-semibold');
                link.classList.remove('text-[--text-light]');
            }
        });
    }

    // Debounce function to limit scroll event handler calls
    function debounce(func, wait = 10, immediate = true) {
        var timeout;
        return function() {
            var context = this, args = arguments;
            var later = function() {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };

    const debouncedHighlight = debounce(highlightSidebarLink, 50);

    window.addEventListener('scroll', debouncedHighlight);
    window.addEventListener('load', highlightSidebarLink); // Initial highlight on load

    // Smooth scrolling for doc links (adjust if existing smooth scroll handles this)
    sidebarLinks.forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if (!targetId || targetId === '#') return;

        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const headerHeight = document.querySelector('.header').offsetHeight;
          const elementPosition = targetElement.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerHeight - 20; // Extra offset

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });

          // Optionally update URL hash without page jump
          // history.pushState(null, null, targetId);
        }
      });
    });

    // Mobile menu functionality
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn'); 
    const sidebar = document.getElementById('doc-side-bar');
    const mobileOverlay = document.querySelector('.mobile-overlay');

    mobileMenuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('active');
      mobileOverlay.classList.toggle('active');
    });

    mobileOverlay.addEventListener('click', () => {
      sidebar.classList.remove('active');
      mobileOverlay.classList.remove('active');
    });

    // Close menu when clicking outside on mobile
    document.addEventListener('click', (e) => {
      if (window.innerWidth <= 1024 && 
          !sidebar.contains(e.target) && 
          !mobileMenuBtn.contains(e.target) && 
          sidebar.classList.contains('active')) {
        sidebar.classList.remove('active');
        mobileOverlay.classList.remove('active');
      }
    });
  </script>
  <script src="/prism.js"></script>
</body>

</html>

